<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
	  xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      >

<ui:composition template="#{paginasBean._template}">  
    <ui:define name="corpo">
    
    	<p:messages />
    	
    	<p:panel header="Agendamento">
    		<h:form id="formbusca">
    		
    			<p:growl id="growl" showDetail="true" sticky="true" /> 

   				<div class="ObjetosLinha">
					<div class="ObjetosColuna">
						<p:outputLabel value="Tipo" />
						<p:selectOneMenu value="#{agendaBean.agenda.tipo_cteprof}" styleClass="TamanhoSelectPP" 
							required="true" requiredMessage="Favor informar o tipo">
								<f:selectItem itemValue="" itemLabel="" />
								<f:selectItem itemValue="1" itemLabel="Assistente Social" />
								<f:selectItem itemValue="2" itemLabel="Fisioterapeuta" /> 	
								<f:selectItem itemValue="3" itemLabel="Psicóloga" /> 	
								<f:selectItem itemValue="4" itemLabel="Pedagoga" /> 
								<f:selectItem itemValue="5" itemLabel="Professora" />
								<f:selectItem itemValue="6" itemLabel="Funcionário" />  	
								
								<p:ajax event="change" listener="#{agendaBean.atualizalistaprofissionais}" update="comboprof formdados" />								
						</p:selectOneMenu>						
					</div>
					
					<div class="ObjetosColuna">
						<p:outputLabel value="Profissional" />
						<p:selectOneMenu value="#{agendaBean.agenda.id_cteprof}" styleClass="TamanhoSelectM" id="comboprof"
							required="true" requiredMessage="Favor informar o profissional">
							<f:selectItem itemValue="" itemLabel="" />
		                    <f:selectItems value="#{agendaBean.profissionaislista}" var="prof"
		                            itemValue="#{prof.id_cteprof}" itemLabel="#{prof.nome_cteprof}" />	  
		                            
							<p:ajax event="change" listener="#{agendaBean.atualizalistaprofissionais}" update="formdados" />                      							
						</p:selectOneMenu>
						
					</div>
				</div>
	      			 
         		<br/>
         			
			     <p:commandButton styleClass="BotaoPrimario" action="#{agendaBean.buscar}" value="Buscar" ajax="false" 
			     	onclick="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" update="formdados"/>     			
      			
      		</h:form>
    	</p:panel>
    	
    	<p:panel>
    		<h:form id="formdados" rendered="#{agendaBean.mostraragenda}">
    		
    			<p:growl id="messages" showDetail="true"/>
    		
    			<p:schedule id="agenda" value="#{agendaBean.eventModel}" widgetVar="myschedule" timeZone="GMT-3">
    			
    				<p:ajax event="dateSelect" listener="#{agendaBean.onDateSelect}" update="messages eventDetails" oncomplete="PF('eventDialog').show();"/>
    				
		            <p:ajax event="eventSelect" listener="#{agendaBean.onEventSelect}" update="formdialogoconsulta"/>
		            
		            <p:ajax event="eventMove" listener="#{agendaBean.onEventMove}" update="messages"/>
		            <p:ajax event="eventResize" listener="#{agendaBean.onEventResize}" update="messages"/>
    			
    			</p:schedule>

		        <p:dialog widgetVar="eventDialog" header="Agendamento" showEffect="fade" hideEffect="fade">
		            <h:panelGrid id="eventDetails" columns="2" cellpadding="7">
		                <p:outputLabel for="title" value="Titles" styleClass="font-bold"/>
		                <p:inputText id="title" value="#{agendaBean.event.title}" required="true"/>
		
		                <p:outputLabel for="from" value="From" styleClass="font-bold"/>
		                <p:datePicker id="from" value="#{agendaBean.event.startDate}" pattern="dd/MM/yyyy" showTime="true" appendTo="@(body)"/>
		
		                <p:outputLabel for="to" value="To" styleClass="font-bold"/>
		                <p:datePicker id="to" value="#{agendaBean.event.endDate}" pattern="dd/MM/yyyy" showTime="true" appendTo="@(body)"/>
		
		                <p:outputLabel for="allDay" value="All Day" styleClass="font-bold"/>
		                <h:selectBooleanCheckbox id="allDay" value="#{agendaBean.event.allDay}"/>
		            </h:panelGrid>
		
		            <div class="flex justify-content-between mt-3">
		                <p:commandButton type="reset" value="Reset" styleClass="font-bold ui-button-outlined"/>
		                <p:commandButton id="addButton" value="Save" action="#{agendaBean.addEvent}" oncomplete="PF('myschedule').update();PF('eventDialog').hide();"/>
		            </div>
		        </p:dialog>  
			</h:form>
			
		        <p:dialog header="Consulta Agendamento" widgetVar="dialogoconsulta">
		    		<h:form id="formdialogoconsulta">
		    		
		    			<p:growl id="growl" showDetail="true" sticky="true" /> 
		    			
		    			<div class="ObjetosLinha">	
		   					<div class="ObjetosColuna">
								<p:outputLabel value="Tipo" />
								<p:inputText value="#{agendaBean.agenda.tipo_cteprof eq '1' ? 'Assistente Social' : (
							                	      agendaBean.agenda.tipo_cteprof eq '2' ? 'Fisioterapeuta' : (
							                	      agendaBean.agenda.tipo_cteprof eq '3' ? 'Psicóloga' : (
							                	      agendaBean.agenda.tipo_cteprof eq '4' ? 'Pedagoga' : (
							                	      agendaBean.agenda.tipo_cteprof eq '5' ? 'Professora' : (
							                	      agendaBean.agenda.tipo_cteprof eq '6' ? 'Funcionário' : (
							                	      agendaBean.agenda.tipo_cteprof eq '7' ? 'Outros' : '')		                	  
							                	    ))))		                	  
							                	    )}" styleClass="TamanhoPP" readonly="true"/>
							</div>
		   				
		   					<div class="ObjetosColuna">
								<p:outputLabel value="Profissional"/>
		   						<p:inputText value="#{agendaBean.agenda.nome_cteprof}" styleClass="TamanhoM" readonly="true"/>
		   					</div>   							   					
						</div>
						<div class="ObjetosLinha">
							<div class="ObjetosColuna">
		   						<p:outputLabel value="Paciente"/>
		   						<p:inputText value="#{agendaBean.event.title}" styleClass="TamanhoM" readonly="true"/>
		   					</div>
		   					
		   					<div class="ObjetosColuna">
		   						<p:outputLabel value="Horário"/>
		   						<p:inputText value="#{agendaBean.agenda.descricao_horario}"	styleClass="TamanhoPP"/>
		   					</div>
						</div>
						<div class="ObjetosLinha">
							<div class="ObjetosColuna">		
								<h:outputLabel value="Observações" /> 
								<p:inputTextarea id="desc" value="#{agendaBean.agenda.obs_agenda}" rows="2" cols="65" 
									autoResize="false" styleClass="TextoCaixaAlta" readonly="true"/>
							</div>
						</div>
		
			      			 
		         		<br/>
		         			
					     <p:commandButton styleClass="BotaoPrimario" value="Fechar" onclick="PF('dialogoconsulta').hide();" />      			
		      			
		      		</h:form>
		   	  </p:dialog>			      			      			
      		
   	  </p:panel>

    </ui:define>
  </ui:composition>   
</html>


